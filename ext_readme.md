## Доработка, комментарии  
  
   
```text
В Dockerfile github.com...Dockerfile можно уменьшить количество строк, ведь каждая строка - это отдельный layer в образе. Так, например, ADD можно указать несколько файлов сразу и одну директорию, куда они все будут добавлены. Директива WORKDIR в данном случае тоже не требуется, ведь работа nginx не зависит от того, из какой директории его запускают.  
 ``` 
  
Да, по поводу workdir полностью согласен, убрал. О помещении в один слой файлов - немного спорно, но в данном случае, нет особого смысла - выполнено.       
```shell
FROM nginx:1.21.4-alpine
ADD index.html style.css /usr/share/nginx/html/
```
  
   
```text
Я не смог попасть на http://a2baed0d46adf455b9a0e1daad872937-1340157659.eu-central-1.elb.amazonaws.com . Видимо, вы уже удалили ресурсы. 
```  
    
Да, ресурсы были выключены, eks дорогой (да, и все в сумме), а сколько будет висеть на проверке не знал. По поводу неиспользования кредов Нетологии писал ранее.  
Ниже привожу обновленные ссылки (подержу 01.12. до 23:50, либо, как писал ранее - сообщите за час - подниму, сброшу новые ссылки, tg: @alsxsx):
Приложение: a2e971c179b5c4eaeae9766b50c6c66f-1335335661.eu-central-1.elb.amazonaws.com
Jenkins: a93814e4178ce4e31ae0db39220d84c4-1390774800.eu-central-1.elb.amazonaws.com:8080
Grafana: a9abcd56872cf4378af75b08c3c0ebb8-1748110092.eu-central-1.elb.amazonaws.com

Доступ: admin admin (как для Графаны, так и для Дженкинса)

Поскольку конкретных требований по настройке Графаны и дашбордов в задании не указано, добавлены стандартные 3119, 6417.
  
  
```text
В списке сервисов я не вижу балансировщика для Graphana. Видимо, скриншот вы сделали раньше, чем запустили prometheus + graphana.
```
  
На той же картинке есть сервис Графаны, он немного ниже расположен, из другого запроса (поскольку она в другом неймспейсе).
  
  
```text
Насколько я понимаю, образ приложения каждый раз собирается с одним и тем же тегом alpineapp и перезаписывается? Если это так, то таким образом вы теряете все версии, кроме самой новой. Значит не будет возможности откатить деплой в случае проблем с очередной версией.

Судя по Jenkinsfile, пайплайн построен не совсем так, как описано в задании. Если я правильно понял, ваш пайплайн при любом изменении собирает приложение (с одним и тем же тегом) и деплоит его. А задание требовало собирать образ при коммите в main, никуда его не деплоить (и можно даже не загружать на docker hub), а вот при постановке тега, производить сборку из этого тега, версионировать образ и этот образ деплоить в k8s.    

Я считаю, что следует доработать CI: настроить создание разных версий (тегов) образов (а не заменять один и тот же), а также сконфигурировать Jenkins так, чтобы при коммите в main происходила только сборка, а вот при установке нового тега происходила сборка, загрузка на docker hub с этим тегом и деплой приложения.  
```
  
Доработано, но не совсем согласен с замечанием. Изначально образ собирался по тегу alpineapp, а после коммита пересобирался (перезаписывался) с одним и тем же тегом applatest. В данном случае версионирование возможно ослеживать с помощью git.  
Также прошу обратить внимание, **в задании ни слова про версионирование**. Возможно, это считается очевидным, но я, приношу извинения, но что прочел, то и сделал (студент пока). Срабатывание Дженкинс настроено именно так, как и Вы говорите в main.  
В соответствии с текстом по ссылке на задание **Размещать в докерхабе и деплоить требуется при любом коммите** (если честно поэтому и перезаписывал в один тег, поскольку коммитов из-за малого опыта было далеко за сотню при настройке CI, соответственно и образов в докерхабе).  
Также в задании (как и в перечне замечаний) **не описано само условие для установки новых тегов** или я чего-то недопонял (но букв таких там точно нет), на мой взгляд, это немного избыточное требование на данном этапе.  
  
При этом, повторюсь, доработал проект по Вашим замечаниям, добавлено простейшее версионирование путем вставки штампа времени в тег. По поводу непонятного момента с тегами поступил по принципу workaround: сделал так, что теги добавляются везде с самого начала и соответственно происходит все остальное по плану.  
  
Далее привожу ряд картинок:
  
![jenkins2](https://github.com/als-port/dip-net/blob/main/pics/ext01_jenkins2.png)  
  
![jenkins1](https://github.com/als-port/dip-net/blob/main/pics/ext01_jenkins1.png)  
  
![jenkins](https://github.com/als-port/dip-net/blob/main/pics/ext01_jenkins.png)   
  
![grafana](https://github.com/als-port/dip-net/blob/main/pics/ext01_grafana.png)   
  
![app](https://github.com/als-port/dip-net/blob/main/pics/ext01_app.png)
